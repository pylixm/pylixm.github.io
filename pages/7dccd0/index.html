<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.24" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.160" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"记一次 Linux OOM-killer 分析过程","image":[""],"dateModified":"2025-09-30T08:57:49.000Z","author":[]}</script><meta property="og:url" content="https://pylixm.top/pages/7dccd0/"><meta property="og:site_name" content="底层逻辑"><meta property="og:title" content="记一次 Linux OOM-killer 分析过程"><meta property="og:description" content="问题现象 最近发现线上服务的服务节点经常性的挂掉，我们业务的线上服务使用docker跑的Tomcat服务。服务业务现象收集如下： tomcat的相关日志，并没有明显的报错信息，但是所有日志均停在了同一时刻。 docker容器是活着的，但是Java进程挂了。 重新启动服务后，内存占用比较高。服务器内存配置16G，jvm Xmx8g Xmn4g。 磁盘IO..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-09-30T08:57:49.000Z"><meta property="article:tag" content="运维知识库"><meta property="article:tag" content="Linux"><meta property="article:modified_time" content="2025-09-30T08:57:49.000Z"><link rel="icon" type="image/png" href="/imgs/favicon-w.ico"><title>记一次 Linux OOM-killer 分析过程 | 底层逻辑</title><meta name="description" content="问题现象 最近发现线上服务的服务节点经常性的挂掉，我们业务的线上服务使用docker跑的Tomcat服务。服务业务现象收集如下： tomcat的相关日志，并没有明显的报错信息，但是所有日志均停在了同一时刻。 docker容器是活着的，但是Java进程挂了。 重新启动服务后，内存占用比较高。服务器内存配置16G，jvm Xmx8g Xmn4g。 磁盘IO..."><link rel="preload" href="/assets/style-dCCzCT1A.css" as="style"><link rel="stylesheet" href="/assets/style-dCCzCT1A.css"><link rel="modulepreload" href="/assets/app-Cpl7-wzY.js"><link rel="modulepreload" href="/assets/index.html-DXKPOHtp.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-2c10dd76><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-6416024b></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-6416024b> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-2c10dd76 data-v-96d6d60a><div class="vp-navbar" vp-navbar data-v-96d6d60a data-v-dcaadf7d><div class="wrapper" data-v-dcaadf7d><div class="container" data-v-dcaadf7d><div class="title" data-v-dcaadf7d><div class="vp-navbar-title" data-v-dcaadf7d data-v-662df57c><a class="vp-link link no-icon title" href="/" data-v-662df57c><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="/imgs/avatar.png" alt data-v-1702acc9><!--]--><!--[--><img class="vp-image light logo" style="" src="/imgs/avatar.png" alt data-v-1702acc9><!--]--><!--]--><!--]--><span data-v-662df57c>底层逻辑</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-dcaadf7d><div class="content-body" data-v-dcaadf7d><!--[--><!--]--><div class="vp-navbar-search search" data-v-dcaadf7d><div class="search-wrapper" data-v-81c21d94><!----><div id="local-search" data-v-81c21d94><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-81c21d94><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-dcaadf7d data-v-2c99efd5><span id="main-nav-aria-label" class="visually-hidden" data-v-2c99efd5>Main Navigation</span><!--[--><!--[--><a class="vp-link link navbar-menu-link" href="/" tabindex="0" data-v-2c99efd5 data-v-0c574ab8><!--[--><!----><span data-v-0c574ab8>首页</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/" tabindex="0" data-v-2c99efd5 data-v-0c574ab8><!--[--><!----><span data-v-0c574ab8>博客</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/tags/" tabindex="0" data-v-2c99efd5 data-v-0c574ab8><!--[--><!----><span data-v-0c574ab8>标签</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/archives/" tabindex="0" data-v-2c99efd5 data-v-0c574ab8><!--[--><!----><span data-v-0c574ab8>归档</span><!----><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-2c99efd5 data-v-969d0a76><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-969d0a76><span class="text" data-v-969d0a76><!----><!----><span data-v-969d0a76>系列笔记</span><!----><span class="vpi-chevron-down text-icon" data-v-969d0a76></span></span></button><div class="menu" data-v-969d0a76><div class="vp-menu" data-v-969d0a76 data-v-3b5d60b8><div class="items" data-v-3b5d60b8><!--[--><!--[--><div class="vp-menu-link" data-v-3b5d60b8 data-v-c4ee3074><a class="vp-link link" href="/opensource/" data-v-c4ee3074><!--[--><!----> 开源资源汇总 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-3b5d60b8 data-v-c4ee3074><a class="vp-link link" href="/self-manage/" data-v-c4ee3074><!--[--><!----> 自我管理 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-3b5d60b8 data-v-c4ee3074><a class="vp-link link" href="/compare-python-go/" data-v-c4ee3074><!--[--><!----> 对比python学习go <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-3b5d60b8 data-v-c4ee3074><a class="vp-link link" href="/git/" data-v-c4ee3074><!--[--><!----> Git学习笔记 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-3b5d60b8 data-v-c4ee3074><a class="vp-link link" href="/data-structure-algorithm/" data-v-c4ee3074><!--[--><!----> 数据结构与算法笔记 <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-dcaadf7d data-v-dea034ba><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-dea034ba data-v-f62ec9d4 data-v-25fc4f56><span class="check" data-v-25fc4f56><span class="icon" data-v-25fc4f56><!--[--><span class="vpi-sun sun" data-v-f62ec9d4></span><span class="vpi-moon moon" data-v-f62ec9d4></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-dcaadf7d data-v-358cb052 data-v-57d9a233><!--[--><a class="vp-social-link no-icon" href="/" aria-label="github" target="_blank" rel="noopener" data-v-57d9a233 data-v-f269a9a9><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-dcaadf7d data-v-b3c4c37a data-v-969d0a76><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-969d0a76><span class="vpi-more-horizontal icon" data-v-969d0a76></span></button><div class="menu" data-v-969d0a76><div class="vp-menu" data-v-969d0a76 data-v-3b5d60b8><!----><!--[--><!--[--><!----><div class="group" data-v-b3c4c37a><div class="item appearance" data-v-b3c4c37a><p class="label" data-v-b3c4c37a>外观</p><div class="appearance-action" data-v-b3c4c37a><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-b3c4c37a data-v-f62ec9d4 data-v-25fc4f56><span class="check" data-v-25fc4f56><span class="icon" data-v-25fc4f56><!--[--><span class="vpi-sun sun" data-v-f62ec9d4></span><span class="vpi-moon moon" data-v-f62ec9d4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-b3c4c37a><div class="item social-links" data-v-b3c4c37a><div class="vp-social-links social-links-list" data-v-b3c4c37a data-v-57d9a233><!--[--><a class="vp-social-link no-icon" href="/" aria-label="github" target="_blank" rel="noopener" data-v-57d9a233 data-v-f269a9a9><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-dcaadf7d data-v-ac671723><span class="container" data-v-ac671723><span class="top" data-v-ac671723></span><span class="middle" data-v-ac671723></span><span class="bottom" data-v-ac671723></span></span></button></div></div></div></div><div class="divider" data-v-dcaadf7d><div class="divider-line" data-v-dcaadf7d></div></div></div><!----></header><div class="vp-local-nav fixed reached-top is-blog" data-v-2c10dd76 data-v-9540fb79><button class="hidden menu" disabled aria-expanded="false" aria-controls="SidebarNav" data-v-9540fb79><span class="vpi-align-left menu-icon" data-v-9540fb79></span><span class="menu-text" data-v-9540fb79>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-9540fb79 data-v-ba082a78><button data-v-ba082a78>返回顶部</button><!----></div></div><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-2c10dd76 data-v-1eb51fa2><div class="vp-doc-container is-blog" data-v-1eb51fa2 data-v-2f4a3604><!--[--><!--]--><div class="container" data-v-2f4a3604><!----><div class="content" data-v-2f4a3604><div class="content-container" data-v-2f4a3604><!--[--><!--]--><main class="main" data-v-2f4a3604><nav class="vp-breadcrumb" data-v-2f4a3604 data-v-fd56bd0f><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-fd56bd0f><!--[--><li property="itemListElement" typeof="ListItem" data-v-fd56bd0f><a class="vp-link link breadcrumb" href="/" property="item" typeof="WebPage" data-v-fd56bd0f><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-fd56bd0f></span><meta property="name" content="首页" data-v-fd56bd0f><meta property="position" content="1" data-v-fd56bd0f></li><li property="itemListElement" typeof="ListItem" data-v-fd56bd0f><a class="vp-link link breadcrumb" href="/blog/" property="item" typeof="WebPage" data-v-fd56bd0f><!--[-->博客<!--]--><!----></a><span class="vpi-chevron-right" data-v-fd56bd0f></span><meta property="name" content="博客" data-v-fd56bd0f><meta property="position" content="2" data-v-fd56bd0f></li><li property="itemListElement" typeof="ListItem" data-v-fd56bd0f><a class="vp-link link breadcrumb" href="/blog/categories/?id=8091bd" property="item" typeof="WebPage" data-v-fd56bd0f><!--[-->运维<!--]--><!----></a><span class="vpi-chevron-right" data-v-fd56bd0f></span><meta property="name" content="运维" data-v-fd56bd0f><meta property="position" content="3" data-v-fd56bd0f></li><li property="itemListElement" typeof="ListItem" data-v-fd56bd0f><a class="vp-link link breadcrumb" href="/blog/categories/?id=fab4b7" property="item" typeof="WebPage" data-v-fd56bd0f><!--[-->常见问题记录<!--]--><!----></a><span class="vpi-chevron-right" data-v-fd56bd0f></span><meta property="name" content="常见问题记录" data-v-fd56bd0f><meta property="position" content="4" data-v-fd56bd0f></li><li property="itemListElement" typeof="ListItem" data-v-fd56bd0f><a class="vp-link link breadcrumb current" href="/pages/7dccd0/" property="item" typeof="WebPage" data-v-fd56bd0f><!--[-->记一次 Linux OOM-killer 分析过程<!--]--><!----></a><!----><meta property="name" content="记一次 Linux OOM-killer 分析过程" data-v-fd56bd0f><meta property="position" content="5" data-v-fd56bd0f></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-b246427d><!----> 记一次 Linux OOM-killer 分析过程 <!----></h1><div class="vp-doc-meta" data-v-b246427d><!--[--><!--]--><p class="reading-time" data-v-b246427d><span class="vpi-books icon" data-v-b246427d></span><span data-v-b246427d>约 4261 字</span><span data-v-b246427d>大约 14 分钟</span></p><p data-v-b246427d><span class="vpi-tag icon" data-v-b246427d></span><!--[--><a class="vp-link link tag vp-tag-u3o9" href="/blog/tags/?tag=Linux" data-v-b246427d><!--[-->Linux<!--]--><!----></a><a class="vp-link link tag vp-tag-m43s" href="/blog/tags/?tag=运维知识库" data-v-b246427d><!--[-->运维知识库<!--]--><!----></a><!--]--></p><!--[--><!--]--><p class="create-time" data-v-b246427d><span class="vpi-clock icon" data-v-b246427d></span><span data-v-b246427d>2023-09-08</span></p></div><!--]--><!--[--><!--]--><div class="_pages_7dccd0_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-2f4a3604><!--[--><!--]--><div data-v-2f4a3604><h2 id="问题现象" tabindex="-1"><a class="header-anchor" href="#问题现象"><span>问题现象</span></a></h2><p>最近发现线上服务的服务节点经常性的挂掉，我们业务的线上服务使用docker跑的Tomcat服务。服务业务现象收集如下：</p><ul><li>tomcat的相关日志，并没有明显的报错信息，但是所有日志均停在了同一时刻。</li><li>docker容器是活着的，但是Java进程挂了。</li><li>重新启动服务后，内存占用比较高。服务器内存配置16G，jvm Xmx8g Xmn4g。</li><li>磁盘IO比较高。</li></ul><p>作为运维，服务有没有内存溢出等问题暂且放一边，先从服务器这边排查下问题。首先怀疑是资源占用比较高，系统把服务干掉了。查看系统日志 message 发现如下日志，证实了猜想：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>Nov 27 21:02:21 localhost kernel: java invoked oom-killer: gfp_mask=0x280da, order=0, oom_score_adj=0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: java cpuset=aa5075722ccf791119d698c46ae14d51d2d2d45d479eee43fda347b6df0f5773 mems_allowed=0-1</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU: 15 PID: 42005 Comm: java Tainted: G            -------------- T 3.10.0-229.el7.x86_64 #1</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Hardware name: Huawei RH1288A V2/BC11SRSK0, BIOS RMIBV512 08/27/2015</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: ffff880287fee660 000000005270c3fe ffff880471377a58 ffffffff81604b0a</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: ffff880471377ae8 ffffffff815ffaaf ffff8803428abf30 ffff8803428abf48</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: 0000000000000206 ffff880287fee660 ffff880471377ad0 ffffffff81117aef</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Call Trace:</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff81604b0a&gt;] dump_stack+0x19/0x1b</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff815ffaaf&gt;] dump_header+0x8e/0x214</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff81117aef&gt;] ? delayacct_end+0x8f/0xb0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff8115a44e&gt;] oom_kill_process+0x24e/0x3b0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff81159fb6&gt;] ? find_lock_task_mm+0x56/0xc0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff8115ac76&gt;] out_of_memory+0x4b6/0x4f0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff81160e55&gt;] __alloc_pages_nodemask+0xa95/0xb90</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff811a29da&gt;] alloc_pages_vma+0x9a/0x140</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff81182fb7&gt;] handle_mm_fault+0x9f7/0xd70</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff810a94f6&gt;] ? try_to_wake_up+0x1b6/0x280</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff810a95e3&gt;] ? wake_up_process+0x23/0x40</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff8160fe06&gt;] __do_page_fault+0x156/0x540</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff812e3247&gt;] ? call_rwsem_wake+0x17/0x30</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff8109c42d&gt;] ? up_write+0x1d/0x20</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff810faec6&gt;] ? __audit_syscall_exit+0x1f6/0x2a0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff8161020a&gt;] do_page_fault+0x1a/0x70</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [&lt;ffffffff8160c408&gt;] page_fault+0x28/0x30</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Mem-Info:</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 0 DMA per-cpu:</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    0: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    1: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    2: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    3: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    4: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    5: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    6: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    7: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    8: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    9: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   10: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   11: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   12: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   13: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   14: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   15: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   16: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   17: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   18: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   19: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   20: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   21: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   22: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   23: hi:    0, btch:   1 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 0 DMA32 per-cpu:</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    0: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    1: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    2: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    3: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    4: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    5: hi:  186, btch:  31 usd:   2</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    6: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    7: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    8: hi:  186, btch:  31 usd:   3</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    9: hi:  186, btch:  31 usd:   1</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   10: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   11: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   12: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   13: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   14: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   15: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   16: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   17: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   18: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   19: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   20: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   21: hi:  186, btch:  31 usd:  12</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   22: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   23: hi:  186, btch:  31 usd:  15</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 0 Normal per-cpu:</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    0: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    1: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    2: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    3: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    4: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    5: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    6: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    7: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    8: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    9: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   10: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   11: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   12: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   13: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   14: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   15: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   16: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   17: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   18: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   19: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   20: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   21: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   22: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   23: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 1 Normal per-cpu:</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    0: hi:  186, btch:  31 usd:  46</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    1: hi:  186, btch:  31 usd:   2</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    2: hi:  186, btch:  31 usd:  42</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    3: hi:  186, btch:  31 usd:   2</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    4: hi:  186, btch:  31 usd:  31</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    5: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    6: hi:  186, btch:  31 usd:  16</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    7: hi:  186, btch:  31 usd: 164</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    8: hi:  186, btch:  31 usd:  19</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU    9: hi:  186, btch:  31 usd:  18</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   10: hi:  186, btch:  31 usd:   8</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   11: hi:  186, btch:  31 usd:  20</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   12: hi:  186, btch:  31 usd:  31</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   13: hi:  186, btch:  31 usd:  27</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   14: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   15: hi:  186, btch:  31 usd:   4</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   16: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   17: hi:  186, btch:  31 usd:  30</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   18: hi:  186, btch:  31 usd:  30</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   19: hi:  186, btch:  31 usd:   0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   20: hi:  186, btch:  31 usd:   3</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   21: hi:  186, btch:  31 usd:  24</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   22: hi:  186, btch:  31 usd:  12</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: CPU   23: hi:  186, btch:  31 usd:  18</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: active_anon:2724567 inactive_anon:177005 isolated_anon:0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 0 DMA free:15900kB min:88kB low:108kB high:132kB active_anon:0kB inactive_anon:0kB active_file:0kB inactive_file:0kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:15984kB managed:15900kB mlocked:0kB dirty:0kB writeback:0kB mapped:0kB shmem:0kB slab_reclaimable:0kB slab_unreclaimable:0kB kernel_stack:0kB pagetables:0kB unstable:0kB bounce:0kB free_cma:0kB writeback_tmp:0kB pages_scanned:0 all_unreclaimable? yes</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: lowmem_reserve[]: 0 1764 7766 7766</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 0 DMA32 free:34556kB min:10040kB low:12548kB high:15060kB active_anon:1612600kB inactive_anon:65356kB active_file:0kB inactive_file:0kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:2052096kB managed:1808016kB mlocked:0kB dirty:0kB writeback:0kB mapped:2344kB shmem:72780kB slab_reclaimable:39568kB slab_unreclaimable:23940kB kernel_stack:8096kB pagetables:5680kB unstable:0kB bounce:0kB free_cma:0kB writeback_tmp:0kB pages_scanned:184 all_unreclaimable? yes</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: lowmem_reserve[]: 0 0 6002 6002</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 0 Normal free:33824kB min:34160kB low:42700kB high:51240kB active_anon:5423868kB inactive_anon:20808kB active_file:20kB inactive_file:12kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:6291456kB managed:6146484kB mlocked:0kB dirty:0kB writeback:0kB mapped:5364kB shmem:18288kB slab_reclaimable:108572kB slab_unreclaimable:85084kB kernel_stack:26192kB pagetables:14532kB unstable:0kB bounce:0kB free_cma:0kB writeback_tmp:0kB pages_scanned:114 all_unreclaimable? yes</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: lowmem_reserve[]: 0 0 0 0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 1 Normal free:46612kB min:45816kB low:57268kB high:68724kB active_anon:3861800kB inactive_anon:621856kB active_file:340kB inactive_file:40kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:8388608kB managed:8243396kB mlocked:0kB dirty:0kB writeback:132kB mapped:3756kB shmem:993724kB slab_reclaimable:120776kB slab_unreclaimable:139408kB kernel_stack:26976kB pagetables:18120kB unstable:0kB bounce:0kB free_cma:0kB writeback_tmp:0kB pages_scanned:2643 all_unreclaimable? yes</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: lowmem_reserve[]: 0 0 0 0</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 0 DMA: 1*4kB (U) 1*8kB (U) 1*16kB (U) 0*32kB 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (R) 3*4096kB (M) = 15900kB</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 0 DMA32: 742*4kB (UEMR) 396*8kB (UEM) 344*16kB (UEM) 407*32kB (UEMR) 151*64kB (UEMR) 5*128kB (UMR) 0*256kB 1*512kB (R) 0*1024kB 0*2048kB 0*4096kB = 35480kB</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 0 Normal: 1015*4kB (UEMR) 599*8kB (UEM) 586*16kB (UEM) 376*32kB (UEM) 99*64kB (UEM) 1*128kB (M) 0*256kB 0*512kB 0*1024kB 0*2048kB 0*4096kB = 36724kB</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 1 Normal: 2725*4kB (UEMR) 1187*8kB (UEM) 460*16kB (UEM) 339*32kB (UEM) 106*64kB (UEM) 7*128kB (UM) 0*256kB 0*512kB 0*1024kB 0*2048kB 0*4096kB = 46284kB</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=2048kB</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Node 1 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=2048kB</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: 272043 total pagecache pages</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: 0 pages in swap cache</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Swap cache stats: add 17671445, delete 17671445, find 29162461/30280216</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Free swap  = 0kB</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Total swap = 0kB</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: 4187036 pages RAM</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: 0 pages HighMem/MovableOnly</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: 133587 pages reserved</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ pid ]   uid  tgid total_vm      rss nr_ptes swapents oom_score_adj name</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 1183]     0  1183    14046     2536      29        0             0 systemd-journal</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 1194]     0  1194    28172       64      21        0             0 lvmetad</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 1249]     0  1249    10682      189      22        0         -1000 systemd-udevd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 2094]     0  2094    29177      123      25        0         -1000 auditd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 2121]   997  2121     1084       30       7        0             0 lsmd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 2124]     0  2124    53614      445      59        0             0 abrtd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 2126]     0  2126    32512      129      21        0             0 smartd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 2127]     0  2127   185139     2193     132        0             0 rsyslogd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 2129]     0  2129    52996      340      56        0             0 abrt-watch-log</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 2130]     0  2130     4817       90      14        0             0 irqbalance</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 2131]     0  2131     1093       40       8        0             0 rngd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 2132]     0  2132     8737      163      21        0             0 systemd-logind</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 2133]    81  2133     7224      180      20        0          -900 dbus-daemon</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 2534]     0  2534     6483       51      16        0             0 atd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 2536]     0  2536     6794       59      18        0             0 xinetd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [ 3458]     0  3458     9840      126      22        0         -1000 sshd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [18475]     0 18475    27501       32      10        0             0 agetty</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [226241]   999 226241   129017     2131      48        0             0 polkitd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [226841]    38 226841     8371      130      20        0             0 ntpd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [17993]     0 17993     2838       50      11        0             0 init.sh</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [18033]     0 18033   271311     4160      94        0             0 python2.6</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [18034]     0 18034    11302     6761      28        0             0 python2.6</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [18042]     0 18042     1038       23       8        0             0 tail</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [133984]     0 133984  1556394     7033     190        0             0 scribed</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [41077]    99 41077     3880       48      12        0             0 dnsmasq</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [136214]     0 136214    27931      275      53        0             0 lldpd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [136217]   990 136217    27931      260      52        0             0 lldpd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [179346] 60422 179346    81770     2557      38        0             0 wagent</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [184527]     0 184527    52460     2085      57        0             0 python</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [184648]     0 184648    49745     1409      53        0             0 python</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [184670]     0 184670    47515     1281      49        0             0 python</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [184696]     0 184696    47514     1278      51        0             0 python</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [184718]     0 184718    47514     1283      48        0             0 python</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [184740]     0 184740    47514     1314      50        0             0 python</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [184762]     0 184762    47514     1302      51        0             0 python</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [56906]     0 56906   505000     6523     101        0             0 xxxAgent</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [38493]     0 38493   347897     6702      90        0          -500 dockerd</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [38776]     0 38776    31576      157      18        0             0 crond</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [39783]     0 39783   118293      662      24        0          -500 docker-containe</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [39805]     0 39805     3761       55      12        0             0 docker.sh</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [39855]     0 39855  6841020  2555504    7788        0             0 java</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [48691]     0 48691    48225     1480      52        0             0 python</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [90430]     0 90430   312213     1081      61        0          -500 docker-containe</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [68926]     0 68926     5624       62      16        0             0 xxagent</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [68932]     0 68932    12834     7251      30        0             0 xxagent</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [70100]     0 70100    42611      220      39        0             0 crond</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [70103]     0 70103    42611      220      39        0             0 crond</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [70176]     0 70176    28279       43      15        0             0 sh</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [70177]     0 70177    28279       42      13        0             0 sh</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [70182]     0 70182    28279       64      13        0             0 bash</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [70186]     0 70186    28279       43      12        0             0 bash</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [70205]     0 70205    32413       93      21        0             0 perl</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [70357]     0 70357    28279       63      11        0             0 bash</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: [70718]     0 70718     1143       81       7        0             0 gzip</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Out of memory: Kill process 39855 (java) score 632 or sacrifice child</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Killed process 39855 (java) total-vm:27364080kB, anon-rss:10222016kB, file-rss:0kB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该日志可以说明 Java进程是被系统kill的了。下面我们来具体看下是怎么回事？</p><h2 id="分析" tabindex="-1"><a class="header-anchor" href="#分析"><span>分析</span></a></h2><p>Linux 系统有一种自我保护的机制叫做 OOM-killer，即当物理内存被进程使用完后，当再有进程来请求内存时，它就会把当前进程中最占用内存最多，回收内存收益最大的进程给kill掉来回收内存，保证系统的正常运行。</p><p>从上边的日志可以看到如下几行：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>Nov 27 21:02:21 localhost kernel: Out of memory: Kill process 39855 (java) score 632 or sacrifice child</span></span>
<span class="line"><span>Nov 27 21:02:21 localhost kernel: Killed process 39855 (java) total-vm:27364080kB, anon-rss:10222016kB, file-rss:0kB</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>从这个日志中，我们可以看到 java进程 39855 因为Out of memory 被系统kill了。下边一行展示了当时他的内存占用情况，虚拟内存 27G左右，anon-rss(虚拟内存页，大家可理解为内存单元，每个大小为4k，一般为进程占用)10G左右,file-rss(文件内存也，当打开大文件时占用)0。</p><p>来看上边各进程内存占用情况，找到java 进程 rss 2555504<em>4k=10G 左右，此进程占用内存最大。其次有5个在6000+， 5</em>6000*4k=1.2G, 剩余进程大约在3~4g，正好为系统的16G。</p><p>当没有空余的内存时，触发OOM-killer机制，java进程占用内存最大，就被系统kill了。由于Java进程非正常退出，docker容器没有退出，但是已经不再提供服务了。</p><h2 id="优化方案" tabindex="-1"><a class="header-anchor" href="#优化方案"><span>优化方案</span></a></h2><p><strong>方案一，降低Java虚拟机配置的最大内存或增加机器物理内存</strong></p><p>在不影响服务的情况下，降低Java虚拟机配置的最大内存，从而降低整体内存的占用情况，虽然内存占用可能依然较高，但是整体会有所下降，触发OOM-killer机制的几率会减少。</p><p><strong>方案二，修改进程得分或关闭OOM-killer机制</strong></p><p>系统在选择进程来kill的时候，会根据某种算法计算出一个介于[-17,15]之间的数值，保存在 /proc/[pid]/oom_adj中，得分越高表示选中的可能性越大。-17表示禁止kill。我们可以修改这个得分来设置我们的进程不被kill。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>$ echo -17 &gt; /proc/$(pidof java)/oom_adj</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>也可采用禁止OOM-killer机制的方法。达到禁止kill的目的。如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span># sysctl -w vm.overcommit_memory=2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>此方案，可能会因进程占用大量内存而没有被释放，导致系统卡死，其他操作无法处理，生产环境不建议使用。</p><p>总之，预估好服务峰值时消耗的内存和机器的物理内存之间的关系是关键。</p><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><ul><li><a href="http://jm.taobao.org/2012/06/26/linux-oom-killer-first-touch/" target="_blank" rel="noopener noreferrer">与Linux OOM-killer的第一次亲密接触</a></li><li><a href="https://my.oschina.net/u/1998527/blog/903622" target="_blank" rel="noopener noreferrer">https://my.oschina.net/u/1998527/blog/903622</a></li><li><a href="https://blog.csdn.net/gugemichael/article/details/24017515" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/gugemichael/article/details/24017515</a></li><li><a href="http://www.cnblogs.com/GoodGoodWorkDayDayUp/p/3473348.html" target="_blank" rel="noopener noreferrer">http://www.cnblogs.com/GoodGoodWorkDayDayUp/p/3473348.html</a></li></ul></div><!----><!----><div class="vp-doc-copyright" data-v-2f4a3604><h2 id="doc-copyright" tabindex="-1" class="vp-doc-header" data-v-cee02859><a href="#doc-copyright" class="header-anchor" data-v-cee02859><span data-v-cee02859><!--[-->版权所有<!--]--></span></a></h2><div class="hint-container tip copyright-container" data-v-7c40702a><p data-v-7c40702a><span data-v-7c40702a>版权归属：</span><a class="vp-link link no-icon" href="https://github.com/pylixm" target="_blank" rel="noreferrer" data-v-7c40702a><!--[-->pylixm<!--]--><!----></a></p><!----><p data-v-7c40702a><span data-v-7c40702a>许可证：</span><a class="vp-link link no-icon" href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noreferrer" data-v-7c40702a><!--[-->署名 4.0 国际 (CC-BY-4.0)<!--]--><!----></a><!--[--><span class="vpi-license-cc" data-v-7c40702a></span><span class="vpi-license-by" data-v-7c40702a></span><!--]--></p></div></div></div></main><footer class="vp-doc-footer" data-v-2f4a3604 data-v-063fc3e9><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-063fc3e9><span class="contributors-label" data-v-063fc3e9>贡献者: </span><span class="contributors-info" data-v-063fc3e9><!--[--><!--[--><span class="contributor" data-v-063fc3e9>pylixm</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-063fc3e9><div class="pager" data-v-063fc3e9><a class="vp-link link pager-link prev" href="/pages/175baf/" data-v-063fc3e9><!--[--><span class="desc" data-v-063fc3e9>上一页</span><span class="title" data-v-063fc3e9>Linux基础系列 - 三剑客之 awk 命令使用总结</span><!--]--><!----></a></div><div class="pager" data-v-063fc3e9><a class="vp-link link pager-link next" href="/pages/2619a7/" data-v-063fc3e9><!--[--><span class="desc" data-v-063fc3e9>下一页</span><span class="title" data-v-063fc3e9>Linux 下 磁盘速度测试</span><!--]--><!----></a></div></nav></footer><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;" data-v-2f4a3604><div style="display: flex;align-items: center;justify-content: center;height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button type="button" class="vp-back-to-top" aria-label="back to top" data-v-2c10dd76 style="display:none;" data-v-d8e263c2><span class="percent" data-allow-mismatch data-v-d8e263c2>0%</span><span class="show icon vpi-back-to-top" data-v-d8e263c2></span><svg aria-hidden="true" data-v-d8e263c2><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-d8e263c2></circle></svg></button><footer class="vp-footer" vp-footer data-v-2c10dd76 data-v-a0a89260><!--[--><div class="container" data-v-a0a89260><p class="message" data-v-a0a89260>Power by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><p class="copyright" data-v-a0a89260>CC BY-NC-SA 4.0</p></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-Cpl7-wzY.js" defer></script></body></html>