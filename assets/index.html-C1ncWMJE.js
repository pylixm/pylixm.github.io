import{_ as i,c as a,a as n,o as h}from"./app-Cpl7-wzY.js";const l={};function k(t,s){return h(),a("div",null,[...s[0]||(s[0]=[n(`<p>当我们在 Linux 系统中执行<code>ip a</code> 或 <code>ifconfig</code> 命令时，我们可以看到系统的网卡信息。如下：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@pylixm-27-192 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># ip a</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lo:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">LOOPBACK,UP,LOWER_U</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">P</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mtu</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 65536</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> qdisc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> noqueue</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> state</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> UNKNOWN</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> group</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> qlen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    link/loopback</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 00:00:00:00:00:00</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> brd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 00:00:00:00:00:00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    inet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 127.0.0.1/8</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scope</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> host</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lo</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">       valid_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> forever</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> preferred_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> forever</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eth0:</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">BROADCAST,MULTICAST,UP,LOWER_U</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">P</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mtu</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1500</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> qdisc</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pfifo_fast</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> state</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> UP</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> group</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> qlen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    link/ether</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 00:16:3e:02:3e:d7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> brd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ff:ff:ff:ff:ff:ff</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    inet</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 172.26.90.158/20</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> brd</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.26.95.255</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> scope</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> global</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dynamic</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eth0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">       valid_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 298248735sec</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> preferred_lft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 298248735sec</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@pylixm-27-192 </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># ifconfig</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">eth0:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> flags=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">4163</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">UP,BROADCAST,RUNNING,MULTICAS</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">T</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mtu</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1500</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        inet</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.26.90.158</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  netmask</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 255.255.240.0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  broadcast</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 172.26.95.255</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        ether</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 00:16:3e:02:3e:d7</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  txqueuelen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  (Ethernet)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 46225179</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  bytes</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 32277903077</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (30.0 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GiB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dropped</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  overruns</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  frame</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 32412060</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  bytes</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 22789919573</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (21.2 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GiB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dropped</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  carrier</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  collisions</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">lo:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> flags=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">73</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">UP,LOOPBACK,RUNNIN</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">G</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  mtu</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 65536</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        inet</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 127.0.0.1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  netmask</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 255.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        loop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  txqueuelen</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1000</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  (Local </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Loopback</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5440800</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  bytes</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 9157089685</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (8.5 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GiB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        RX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dropped</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  overruns</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  frame</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packets</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5440800</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  bytes</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 9157089685</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (8.5 </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">GiB</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">        TX</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> errors</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dropped</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> overruns</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  carrier</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  collisions</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>类似<code>eth0</code>的便是物理网卡对应的系统接口，这里只有一个<code>eth0</code> 说明我的机器只有一个物理网卡。<code>lo</code> 大家肯定多少有所耳闻，它是一个虚拟的网络接口，并没有对应的物理网卡，我们知道它的地址是<code>127.0.0.1</code>，主要作为本地地址使用。在程序开发中，我们常常把服务启动在这个地址上，通过浏览器来访问<code>127.0.0.1</code>或其解析的<code>localhost</code> 来访问本地的服务进行调试。</p><p>上面说的这种用法属于本地系统内部服务交互的一个典型用法。<strong>lo除了作为内部服务交互的接口外，还可作为 IP 的暂存接口使用</strong>。一个典型的应用场景「LVS DR模式」：</p><ul><li><p>在 DR 模式中，RS 需要在 non-arp 的网卡上配置 vip，lo 即可作为这个 non-arp 网卡配合内核参数<code>arp_ignore=1</code>将 ARP 包仅限定真实网卡信息本身，即只回答目标 IP 地址是来访网络接口本地地址的 ARP 查询请求，说白了，就是只回 LVS 服务器的 ARP 包，避免 vip 冲突。</p></li><li><p>RS 回包，利用参数<code>arp_announce=2</code>发送 ARP 报文时，使用了本地真实网卡的 ip 地址，这样顺利拿到客户机的 mac 地址。IP 层并没有变化，还是源地址为 VIP，目标地址为客户端 IP。</p></li></ul><p>LVS DR 的原理，可阅读下边文章，写的比较清晰明了：</p><ul><li><a href="https://my.oschina.net/u/2487485/blog/780346" title="关于LVS-DR中一次数据的完整旅行" target="_blank" rel="noopener noreferrer">关于 LVS-DR 中一次数据的完整旅行</a></li><li><a href="http://dockone.io/article/10052" title="LVS那些你不知道的秘密" target="_blank" rel="noopener noreferrer">LVS 那些你不知道的秘密</a></li></ul><p><strong>另外，这个 lo 绑定 ip 时有坑，在我们不使用时需要及时清理。否则，当我们访问解析为 lo 绑定的 ip 的域名的时候，请求会达到本地的 lo 网卡，本地有这个 ip 对应的服务还好，若没有，那请求直接报错。</strong></p><p>总结下，lo 网卡的主要功能：</p><ul><li>作为本地系统服务的内部交互接口。</li><li>作为 ip 的暂存虚拟网卡。</li></ul><p>欢迎留言，讨论 lo 的其他有意思的功能。</p>`,11)])])}const e=i(l,[["render",k]]),r=JSON.parse('{"path":"/pages/f71e02/","title":"「SRE知识总结」lo 网卡到底干什么用的","lang":"zh-CN","frontmatter":{"title":"「SRE知识总结」lo 网卡到底干什么用的","tags":["SRE知识总结"],"permalink":"/pages/f71e02/","createTime":"2023/09/08 17:36:02","description":"当我们在 Linux 系统中执行ip a 或 ifconfig 命令时，我们可以看到系统的网卡信息。如下： 类似eth0的便是物理网卡对应的系统接口，这里只有一个eth0 说明我的机器只有一个物理网卡。lo 大家肯定多少有所耳闻，它是一个虚拟的网络接口，并没有对应的物理网卡，我们知道它的地址是127.0.0.1，主要作为本地地址使用。在程序开发中，我们...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"「SRE知识总结」lo 网卡到底干什么用的\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-30T08:57:49.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://pylixm.top/pages/f71e02/"}],["meta",{"property":"og:site_name","content":"底层逻辑"}],["meta",{"property":"og:title","content":"「SRE知识总结」lo 网卡到底干什么用的"}],["meta",{"property":"og:description","content":"当我们在 Linux 系统中执行ip a 或 ifconfig 命令时，我们可以看到系统的网卡信息。如下： 类似eth0的便是物理网卡对应的系统接口，这里只有一个eth0 说明我的机器只有一个物理网卡。lo 大家肯定多少有所耳闻，它是一个虚拟的网络接口，并没有对应的物理网卡，我们知道它的地址是127.0.0.1，主要作为本地地址使用。在程序开发中，我们..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-30T08:57:49.000Z"}],["meta",{"property":"article:tag","content":"SRE知识总结"}],["meta",{"property":"article:modified_time","content":"2025-09-30T08:57:49.000Z"}]]},"readingTime":{"minutes":2.76,"words":829},"git":{"createdTime":1759222669000,"updatedTime":1759222669000,"contributors":[{"name":"pylixm","username":"pylixm","email":"pyli.xm@gmail.com","commits":1,"avatar":"https://avatars.githubusercontent.com/pylixm?v=4","url":"https://github.com/pylixm"}]},"autoDesc":true,"filePathRelative":"05.运维/03.其他/16.lo网卡干什么用.md","headers":[],"categoryList":[{"id":"8091bd","sort":5,"name":"运维"},{"id":"b3e39d","sort":3,"name":"其他"}]}');export{e as comp,r as data};
